<!DOCTYPE html>
<html><head><meta charset="UTF-8"><title>Login</title><style>
  body{font-family:Inter,sans-serif;background:#f1f5f9;display:flex;align-items:center;justify-content:center;height:100vh;margin:0}
  .card{background:white;padding:2rem;border-radius:18px;box-shadow:0 8px 25px rgba(0,0,0,.08);width:100%;max-width:400px}
  input,button{width:100%;padding:0.85rem;margin:0.5rem 0;border:1px solid #e2e8f0;border-radius:12px}
  button{background:#4f46e5;color:white;cursor:pointer}
</style></head><body>
<div class="card">
  <h2 style="text-align:center;color:#4f46e5">Login</h2>
  <input id="name" placeholder="Username" />
  <input id="pass" type="password" placeholder="Password" />
  <button onclick="login()">Login</button>
  <p style="text-align:center"><a href="/register.html">Register</a></p>
  <p id="status" style="text-align:center;color:red"></p>
</div>
<script>
async function login() {
  const name = document.getElementById('name').value.trim();
  const pass = document.getElementById('pass').value;
  const status = document.getElementById('status');
  if (!name || !pass) return status.textContent = 'Required';

  const res = await fetch('/api/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ name, password: pass })
  });
  const data = await res.json();
  if (data.success) {
    localStorage.setItem('chatToken', data.token);
    localStorage.setItem('chatUser', JSON.stringify(data.user));
    location.href = '/';
  } else {
    status.textContent = data.error;
  }
}
</script>
</body></html>
